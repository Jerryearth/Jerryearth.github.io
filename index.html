<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>é«˜è€ƒèµ„æ–™ä¸‹è½½ä¸­å¿ƒ</title>
<style>
  body { font-family: Arial; }
  ul { list-style: none; padding-left: 20px; }
  li { margin: 4px 0; }
  .folder { cursor: pointer; font-weight: bold; }
  .hidden { display: none; }
</style>
</head>
<body>

<h1>ðŸ“š é«˜è€ƒèµ„æ–™ä¸‹è½½ä¸­å¿ƒ</h1>
<div id="tree"></div>

<script>
const user = "jerryearth";
const repo = "jerryearth.github.io";

async function fetchAll(path = "") {
  const res = await fetch(
    `https://api.github.com/repos/${user}/${repo}/contents/${path}`
  );
  const data = await res.json();

  let result = [];

  for (const item of data) {
    if (item.type === "dir") {
      const children = await fetchAll(item.path);
      result.push({ type: "dir", name: item.name, children });
    } 
    else if (item.name.endsWith(".pdf")) {
      result.push({ type: "file", name: item.name, url: item.download_url });
    }
  }
  return result;
}

function renderTree(data, container) {
  const ul = document.createElement("ul");
  container.appendChild(ul);

  data.forEach(item => {
    const li = document.createElement("li");

    if (item.type === "dir") {
      li.textContent = "ðŸ“‚ " + item.name;
      li.classList.add("folder");

      const subDiv = document.createElement("div");
      subDiv.classList.add("hidden");

      li.onclick = () => {
        subDiv.classList.toggle("hidden");
      };

      ul.appendChild(li);
      ul.appendChild(subDiv);

      renderTree(item.children, subDiv);
    } 
    else {
      li.innerHTML = `ðŸ“„ <a href="${item.url}" target="_blank">${item.name}</a>`;
      ul.appendChild(li);
    }
  });
}

fetchAll().then(data => {
  renderTree(data, document.getElementById("tree"));
});
</script>

</body>
</html>
